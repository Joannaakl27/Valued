<div class="container d-flex justify-content-center">

    <div class="card">
      <div class="card-body flex-column justify-content-center">
        <div class="d-flex justify-content-between ">
          <h3 class="card-title font-weight-bold"><%= @product["product_name"] %></h3>
          <%= link_to new_consumable_path(product_id: @product["_id"]), class:"fa-solid fa-3x" do %>
            <%= icon('fa-solid', 'square-plus') %>
          <% end %>
        </div>
        <p class="card-text"><%= @product["brands_tags"].first %></p>
        <div class="d-flex justify-content-between">
          <h4 class = "display-3 degree"><%= @product["ecoscore_data"]["agribalyse"]["co2_total"].round(2)%></h4>
        </div>
        <div class="d-flex justify-content-between mt-3 mb-3">
          <h6>
            <i class="fa fa-spinner fa-lg text-info pe-2" ></i>
            <span data-toggle="tooltip" title="% of fair daily food emissions">
              <%= ((@product["ecoscore_data"]["agribalyse"]["co2_total"] / 4.50785714366) * 100).round()%> % FDFE
            </span>
          </h6>
          <h6>
            <i class="fas fa-bolt fa-lg text-muted pe-2"></i>
            <span data-toggle="tooltip" title="for Swiss household">
              <%= (@product["ecoscore_data"]["agribalyse"]["co2_total"] / 0.162).round() %> Days of power
            </span>
          </h6>
        </div>
        <h5 class="card-title font-weight-bold mt-4"> Life Cycle Analysis</h5>
        <div class="donut mt-4" style="--first: <%= (@product["ecoscore_data"]["agribalyse"]["co2_agriculture"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) %>;
                                  --second: <%= (@product["ecoscore_data"]["agribalyse"]["co2_processing"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) %>;
                                  --third: <%= (@product["ecoscore_data"]["agribalyse"]["co2_packaging"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) %>;
                                  --fourth: <%= (@product["ecoscore_data"]["agribalyse"]["co2_transportation"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) %>;
                                  --fifth: <%= (@product["ecoscore_data"]["agribalyse"]["co2_distribution"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) %>; --donut-spacing: 2;">
          <div class="donut__slice donut__slice__first"></div>
          <div class="donut__slice donut__slice__second"></div>
          <div class="donut__slice donut__slice__third"></div>
          <div class="donut__slice donut__slice__fourth"></div>
          <div class="donut__slice donut__slice__fifth"></div>
        </div>
        <ul class="list-inline">
                    <li class="flexbox mb-1">
                        <div> <span class="badge " style="background-color: #efb3e6"></span> <span>Agriculture</span> </div>
                        <div><span><%= (@product["ecoscore_data"]["agribalyse"]["co2_agriculture"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) * 100%> %</span></div>
                    </li>
                    <li class="flexbox mb-1">
                        <div> <span class="badge badge-dot badge-lg mr-1" style="background-color: #ffdf7c"></span> <span>Pocessing</span> </div>
                        <div><span><%= (@product["ecoscore_data"]["agribalyse"]["co2_processing"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) * 100%> %</span></div>
                    </li>
                    <li class="flexbox">
                        <div> <span class="badge badge-dot badge-lg mr-1" style="background-color: #b2def7"></span> <span>Packaging</span> </div>
                        <div><span><%= (@product["ecoscore_data"]["agribalyse"]["co2_packaging"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) * 100%> %</span></div>
                    </li>
                    <li class="flexbox mb-1">
                        <div> <span class="badge badge-dot badge-lg mr-1" style="background-color: #ffdf7c"></span> <span>Transportation</span> </div>
                        <div><span><%= (@product["ecoscore_data"]["agribalyse"]["co2_transportation"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) * 100%> %</span></div>
                    </li>
                    <li class="flexbox mb-1">
                        <div> <span class="badge badge-dot badge-lg mr-1" style="background-color: #ffdf7c"></span> <span>Distribution</span> </div>
                        <div><span><%= (@product["ecoscore_data"]["agribalyse"]["co2_distribution"]/ @product["ecoscore_data"]["agribalyse"]["co2_total"]).round(2) * 100%> %</span></div>
                    </li>
                </ul>
      </div>
    </div>
</div>
